 <!doctype html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-135926838-2');
  </script>
  <link rel="apple-touch-icon" sizes="180x180" href="tetr_js/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="tetr_js/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="tetr_js/icons/favicon-16x16.png">
  <link rel="manifest" href="icons/site.webmanifest">
  <link rel="mask-icon" href="tetr_js/icons/safari-pinned-tab.svg" color="#8e24aa">
  <link rel="shortcut icon" href="tetr_js/icons/favicon.ico">
  <meta name="msapplication-TileColor" content="#9f00a7">
  <meta name="msapplication-config" content="icons/browserconfig.xml">
  
 <meta content="Tetr.js Enhanced" property="og:title" />
<meta content="üïπÔ∏è Tetr.js Enhanced clone in HTML5 and JavaScript" property="og:description" />

  <meta name="theme-color" data-react-helmet="true" content="#ae0f0f">
  <meta content="https://raw.githubusercontent.com/redinstealth/Tetr.js/main/tetr_js/icons/safari-pinned-tab.svg" property="og:image" />
  <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0, width=device-width"/>
  <title>Tetr.js Enhanced</title>
	<link rel="canonical" href="https://doktorocelot.com" />
  <link rel="stylesheet" href="tetr_js/style.css">
  <link href="//fonts.googleapis.com/css?family=Roboto+Mono:300,400,500,700|Roboto:300,400,500,700" rel="stylesheet">
  <link href="//fonts.googleapis.com/css?family=Roboto+Condensed:400,700&amp;display=swap" rel="stylesheet">
  <!--<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-554c83a8661bf358" async="async"></script>-->
</head>
<body>
  <!--<canvas id="bg"></canvas>-->
  <video autoplay muted loop id="myVideo">
  <source  type="video/mp4">
</video>
  <div class="touchbutton" id="touchLeft" style="display:none"><i class="material-icons">&#xE5C4;</i></div>
  <div class="touchbutton" id="touchRight" style="display:none"><i class="material-icons">&#xE5C8;</i></div>
  <div class="touchbutton" id="touchDown" style="display:none"><i class="material-icons">&#xE906;</i></div>
  <div class="touchbutton" id="touchDrop" style="display:none"><i class="material-icons">&#xE2C4;</i></div>
  <div class="touchbutton" id="touchHold" style="display:none"><i class="material-icons">&#xE8D4;</i></div>
  <div class="touchbutton" id="touchRotRight" style="display:none"><i class="material-icons">&#xE15A;</i></div>
  <div class="touchbutton" id="touchRotLeft" style="display:none"><i class="material-icons">&#xE166;</i></div>
  <div class="touchbutton" id="touchRot180" style="display:none"><i class="material-icons">&#xE5D5;</i></div>
  <div class="touchbutton" id="touchLayout" style="display:none"><i class="material-icons">&#xE913;</i></div>
  <div class="wrapper" id="rainbow" style="display: none;"></div>
  <div id="content">
    <!-- Canvases -->
    <div id="d">
      <h3 id="holdtext" style="font-weight: 300;"><span class="white-border-span">Hold</span></h3>
      <div id="a">
        <canvas id="hold" class="glow-flash-animation"></canvas>
        <br/>
        <div id="divInp"></div>
      </div>
      <h3 id="ihs-indicator" class="flashing" style="display: none; margin-top: -2.9em">INITIAL</h3>
      <table id="stats">
        <tr id="nesratetr" style="display: none;">
         <th class="white-border-span" style="font-size: .5em;"><b>Tetris</b> Rate</th>
          <td id="nesrate" style="font-family: 'Roboto Mono'; font-weight: 500; font-size: 0.8em">0</td>
        </tr>
        <tr>
         <th id="score-label" class="white-border-span">Score</th>
          <td style="font-family: 'Roboto Condensed'; font-weight:300;font-size:0.8em;" id="score">0</td>
          <td style="font-family: 'Roboto Condensed'; display: none;font-weight:300;font-size:1em;" id="nesscore">0</td>
        </tr>
        <tr>
             <th id="level" class="white-border-span"></th>
                       <th id="strict-ind" style="font-size: 0.5em; text-align: right; color: red; display: none;" class="">STRICT MODE</th>
        </tr>
        <tr>
         <th class="white-border-span">Lines</th>
          <td id="levelline" style="font-family: 'Roboto Mono'; font-weight: 300">
            <div id="promode"></div>
            <div id="line" style="font-family: 'Roboto Mono'; font-weight: 300">0</div>
          </td>
        </tr>
        <tr>
         <th class="white-border-span">Pieces</th>
          <td id="piece" style="font-family: 'Roboto Mono'; font-weight: 300">0</td>
        </tr>
        <tr>
          <th id="time" class="" style="  padding-right: 0em;
  width: 100%;"><canvas></canvas></th>
        </tr>
      </table>
    </div>
    <div id="b">
      <canvas id="bgStack" class="" style=""></canvas>
      <canvas id="stack">You need an up-to-date web browser to play this game.</canvas>
      <canvas id="active"></canvas>
      <div id="msgdiv">
        <span id="msg"></span>
      </div>
      <div id="cleardiv">
        <span id="clear"></span>
      </div>
      <div id="rendiv">
        <span id="renmsg"></span>
      </div>
      <div id="b2bdiv">
        <span id="b2bmsg"></span>
      </div>
      <nav class="menu on">
        <img style="margin: 0px" width="72%" src="tetr_js/tetrjslogoenhanced.svg">
        <!--      <h1 style="font-weight: 4;font-size: 2rem;margin: 0px">Tetr.js Enhanced</h1>-->
        <p style="margin:0px">v1.0.1 <a class="link" href="changelog.html">(view changelog)</a></p>
<!--
        <p style=margin:3px>designed by simonlc<br>
          overhauled by farter<br>
          enhanced by Dr Ocelot</p>
        <p style=margin:5px;>forked from: <a class="link" href="https://github.com/farteryhr/tetr.js/tree/gh-pages">&gt;&gt;Dig v0.58 by farter</a><br />
-->
          <div class="btn-container" style="margin: 0px">
            <a class="btn tournament" target="_blank" href="https://tetralegends.app/" style="margin-top: 9px;">Tetra Legends</a>
            <a class="btn btn-inline" target="_blank" href="https://discord.gg/cvqaewgd7J" style="margin-bottom: 1.1em;">Discord</a>
            <div style="display:none">
            <a class="btn tournament" onclick="tourneySettings();init(1, {tournament: true})"><i class="material-icons">&#xE8E5;</i>Tournament</a>
            <p><a class="link" style="margin:0" target="_blank" href="https://www.youtube.com/watch?v=qL9-eKF9oso">More Information</a></p>
            </div>
            <a class="btn" onclick="menu(9,1)"><i class="material-icons">&#xe3e7;</i>Sprint</a>
            <a class="btn" onclick="menu(10,1)"><i class="material-icons">&#xE8E5;</i>Marathon</a>
            <a class="btn" onclick="menu(11,1)"><i class="material-icons">&#xe80c;</i>Master</a>
            <a class="btn" onclick="menu(8,1)"><i class="material-icons">&#xe161;</i>Retro</a>
            <a class="btn" onclick="menu(7,1)"><i class="material-icons">&#xE8E5;</i>Dig</a>
            <a class="btn" onclick="menu(16,1)"><i class="material-icons">&#xE8E5;</i>Survival</a>
            <a class="btn" onclick="menu(17,1)" style="margin-bottom: 1.1em;"><i class="material-icons">&#xE8E5;</i>Grades? (WIP)</a>
            <a class="btn" onclick="menu(2)" id="btnbinds"><i class="material-icons">&#xE021;</i> Controls</a>
            <a class="btn" onclick="menu(12)"><i class="material-icons">&#xE869;</i> Settings</a>
            <a class="btn" onclick="menu(6,1)"><i class="material-icons">&#xE04A;</i> Replay</a>
          </div>
      </nav>
      <div class="menu">
        <h2 style="margin:0px">Settings</h2>
        <div id="settings">
        </div>
        <div style="clear:both"><a class="btn" onclick="menu(0)">Done</a></div>
      </div>
      <div class="menu">
        <h2 style="margin:0px">Controls</h2>
        <p style="margin: 0px">Click on the item you want to change, then press any key.
        </p>
        <table id="controls" style="margin-top:0px;">
          <tr>
            <th>Move <i class="material-icons">&#xE5C4;</i></th>
            <td id="moveLeft">‚Üê</td>
          </tr>
          <tr>
            <th>Move <i class="material-icons">&#xE5C8;</i></th>
            <td id="moveRight">‚Üí</td>
          </tr>
          <tr>
            <th>Triple <i class="material-icons">&#xE5C4;</i></th>
            <td id="moveLeft3">---</td>
          </tr>
          <tr>
            <th>Triple <i class="material-icons">&#xE5C8;</i></th>
            <td id="moveRight3">---</td>
          </tr>
          <tr>
            <th>Move <i class="material-icons">&#xE906;</i></th>
            <td id="moveDown">‚Üì</td>
          </tr>
          <tr>
            <th>Drop <i class="material-icons">&#xE2C4;</i></th>
            <td id="hardDrop">Space</td>
          </tr>
          <tr>
            <th>Hold <i class="material-icons">&#xE8D4;</i></th>
            <td id="holdPiece">M</td>
          </tr>
          <tr>
            <th>Spin <i class="material-icons">&#xE15A;</i></th>
            <td id="rotRight">‚Üë</td>
          </tr>
          <tr>
            <th>Spin <i class="material-icons">&#xE166;</i></th>
            <td id="rotLeft">Z</td>
          </tr>
          <tr>
            <th>Spin <i class="material-icons">&#xE5D5;</i></th>
            <td id="rot180">Shift</td>
          </tr>
          <tr>
            <th>Retry <i class="material-icons">&#xE040;</i></th>
            <td id="retry">R</td>
          </tr>
          <tr>
            <th>Pause <i class="material-icons">&#xE034;</i></th>
            <td id="pause">Esc</td>
          </tr>
        </table>
        <a class="btn btn-bottom" onclick="menu(0);document.getElementById('/').classList.remove('/');">Done</a>
      </div>
      <nav id="go" class="menu">
        <div class="btn-container btn-container-bottom">
          <a class="btn" onclick="init(gametype,gameparams)">Retry</a>
          <a class="btn btn-inline" onclick="init('replay')" style="width: 50%;">Replay</a><a class="btn btn-inline" onclick="showreplaydata(curreplaydata())" style="width: calc(25% - .7rem); margin-left: .7rem"><i class="material-icons">&#xE161;</i></a>
          <!--        <a class="btn highlight" onclick="menu(5,1);this.classList.remove('/')">Rankings</a>  Commented out rankings because they don't work-->
          <a class="btn" onclick="menu(0)">Back</a>
        </div>
      </nav>
      <nav id="pause" class="menu">
        <div class="btn-container btn-container-bottom">
          <a class="btn" onclick="unpause()">Resume</a>
          <a class="btn" onclick="init(gametype,gameparams)">Restart</a>
          <a class="btn" onclick="menu(0)">Main Menu</a>
        </div>
      </nav>
      <div id="leader" class="menu">
        <h2>Rankings</h2>
        <div id="leaderboard"></div>
        <div style="clear:both"><a class="btn" onclick="menu(void 0,-1)">Back</a></div>
      </div>
      <nav id="replay" class="menu">
        <h2>Replay</h2>
        <p>Ctrl+C / Ctrl+V</p>
        <textarea id="replaydata" spellcheck="false"></textarea>
        <ul>
          <li><a class="btn" onclick="tryreplaydata();sound.init()">Watch</a></li>
          <li><a class="btn" onclick="menu(void 0,-1)">Back</a></li>
        </ul>
      </nav>
      <nav class="menu">
        <h1 style="font-weight: 4;font-size: 1.5rem;margin: 0px">Dig</h1>
        <p style="margin: 0px">Clear the bottom as line as soon as possible</p>
          <h4 class="option-header">Checkered</h4>
          <p class="option-description">Dig through a checkered stack instead of a diagonal one
          </p>
          <div class="btn-group" style="margin-left: 5.5em">
            <button id="dig-checker-0" onclick="changeSetting('dig', 'checker', 0)">Off</button>
            <button id="dig-checker-1" onclick="changeSetting('dig', 'checker', 1)">On</button>
          </div>
          <br>
        <a class="btn btn-inline" onclick="init(4)" style="width: 50%;">Start</a><a class="btn btn-inline" onclick="menu(void 0,-1)" style="width: calc(25% - .7rem); margin-left: .7rem">Back</a>
      </nav>
      <nav class="menu">
        <h1 style="font-weight: 4;font-size: 1.5rem;margin: 0px">Retro</h1>
        <p style="margin: 0px">Classic game with a variety of options.</p>
        <div style="margin: 0px" class="btn-container">
          <h4 class="option-header">Game Type</h4>
          <p class="option-description">A-Type: Play Forever
            <br>B-Type: Reach 25 Lines
          </p>
          <div class="btn-group" style="margin-left: 4.34em">
            <button id="retro-type-0" onclick="changeSetting('retro', 'type', 0)">A-Type</button>
            <button id="retro-type-1" onclick="changeSetting('retro', 'type', 1)">B-Type</button>
          </div>
          <h4 class="option-header">Starting Level</h4>
          <p class="option-description">Choose a level to start
          </p>
          <div class="btn-group btn-ensquishened" style="margin-left: 1em">
            <button id="retro-level-0" onclick="changeSetting('retro', 'level', 0)">00</button>
            <button id="retro-level-1" onclick="changeSetting('retro', 'level', 1)">01</button>
            <button id="retro-level-2" onclick="changeSetting('retro', 'level', 2)">02</button>
            <button id="retro-level-3" onclick="changeSetting('retro', 'level', 3)">03</button>
            <button id="retro-level-4" onclick="changeSetting('retro', 'level', 4)">04</button>
            <button id="retro-level-5" onclick="changeSetting('retro', 'level', 5)">05</button>
            <button id="retro-level-6" onclick="changeSetting('retro', 'level', 6)">06</button>
            <button id="retro-level-7" onclick="changeSetting('retro', 'level', 7)">07</button>
            <button id="retro-level-8" onclick="changeSetting('retro', 'level', 8)">08</button>
            <button id="retro-level-9" onclick="changeSetting('retro', 'level', 9)">09</button>
          </div>
          <div class="btn-group btn-ensquishened" style="margin-left: 1em">
            <button id="retro-level-10" onclick="changeSetting('retro', 'level', 10)">10</button>
            <button id="retro-level-11" onclick="changeSetting('retro', 'level', 11)">11</button>
            <button id="retro-level-12" onclick="changeSetting('retro', 'level', 12)">12</button>
            <button id="retro-level-13" onclick="changeSetting('retro', 'level', 13)">13</button>
            <button id="retro-level-14" onclick="changeSetting('retro', 'level', 14)">14</button>
            <button id="retro-level-15" onclick="changeSetting('retro', 'level', 15)">15</button>
            <button id="retro-level-16" onclick="changeSetting('retro', 'level', 16)">16</button>
            <button id="retro-level-17" onclick="changeSetting('retro', 'level', 17)">17</button>
            <button id="retro-level-18" onclick="changeSetting('retro', 'level', 18)">18</button>
            <button id="retro-level-19" onclick="changeSetting('retro', 'level', 19)">19</button>
          </div>
          <h4 class="option-header">Retro Skin</h4>
          <p class="option-description">Enable the colour-changing retro skin
          </p>
          <div class="btn-group" style="margin-left: 5.5em">
            <button id="retro-skin-0" onclick="changeSetting('retro', 'skin', 0)">Off</button>
            <button id="retro-skin-1" onclick="changeSetting('retro', 'skin', 1)">On</button>
          </div>
          <h4 class="option-header">Hard Drop</h4>
          <p class="option-description">Allow the use of hard drop
          </p>
          <div class="btn-group" style="margin-left: 5.5em">
            <button id="retro-drop-0" onclick="changeSetting('retro', 'drop', 0)">Off</button>
            <button id="retro-drop-1" onclick="changeSetting('retro', 'drop', 1)">On</button>
          </div>
          <h4 class="option-header">Flashing Effect</h4>
          <p class="option-description">Show a screen flash upon clearing a Tetris
          </p>
          <div class="btn-group" style="margin-left: 5.5em">
            <button id="retro-flash-0" onclick="changeSetting('retro', 'flash', 0)">Off</button>
            <button id="retro-flash-1" onclick="changeSetting('retro', 'flash', 1)">On</button>
          </div>
          <br>
          <a class="btn btn-inline" onclick="init(8,{proMode:false})" style="width: 50%;">Start</a><a class="btn btn-inline" onclick="menu(void 0,-1)" style="width: calc(25% - .7rem); margin-left: .7rem">Back</a>
        </div>
      </nav>
      <nav class="menu">
        <h1 style="font-weight: 4;font-size: 1.5rem;margin: 0px">Sprint</h1>
        <p style="margin: 0px">Clear the lines as fast as you can!</p>
        <div style="margin: 0px" class="btn-container">
          <h4 class="option-header">Goal</h4>
          <p class="option-description">Total lines to clear</p>
          <div class="btn-group" style="margin-left: 4.8em">
            <button id="sprint-limit-0" onclick="changeSetting('sprint', 'limit', 0)">40</button>
            <button id="sprint-limit-1" onclick="changeSetting('sprint', 'limit', 1)">100</button>
            <button id="sprint-limit-2" onclick="changeSetting('sprint', 'limit', 2)">200</button>
          </div>
          <h4 class="option-header">Piece Set</h4>
          <p class="option-description">The types of pieces used during the game</p>
          <div class="btn-group" style="margin-left: 3em">
            <button id="sprint-piece-0" onclick="changeSetting('sprint', 'piece', 0)">Standard</button>
            <button id="sprint-piece-1" onclick="changeSetting('sprint', 'piece', 1)">No I</button>
            <button id="sprint-piece-2" onclick="changeSetting('sprint', 'piece', 2)">I Only</button>
          </div>
          <h4 class="option-header">Backfire</h4>
          <p class="option-description">Have lines sent back to you</p>
          <div class="btn-group" style="margin-left: 2.9em">
            <button id="sprint-backfire-0" onclick="changeSetting('sprint', 'backfire', 0)">Off</button>
            <button id="sprint-backfire-1" onclick="changeSetting('sprint', 'backfire', 1)">Low</button>
            <button id="sprint-backfire-2" onclick="changeSetting('sprint', 'backfire', 2)">Med</button>
            <button id="sprint-backfire-3" onclick="changeSetting('sprint', 'backfire', 3)">High</button>
          </div>
          <br>
          <a class="btn btn-inline" onclick="init(0)" style="width: 50%;">Start</a><a class="btn btn-inline" onclick="menu(void 0,-1)" style="width: calc(25% - .7rem); margin-left: .7rem">Back</a>
        </div>
      </nav>
      <nav class="menu">
        <h1 style="font-weight: 4;font-size: 1.5rem;margin: 0px">Marathon</h1>
        <p style="margin: 0px">Standard game. Aim for a high score.</p>
        <h4 class="option-header">Goal</h4>
        <p class="option-description">Lines to reach before winning</p>
        <div class="btn-group" style="margin-left: 2.4em">
          <button id="marathon-limit-0" onclick="changeSetting('marathon', 'limit', 0)">150</button>
          <button id="marathon-limit-1" onclick="changeSetting('marathon', 'limit', 1)">200</button>
          <button id="marathon-limit-3" onclick="changeSetting('marathon', 'limit', 3)">300</button>
          <button id="marathon-limit-2" onclick="changeSetting('marathon', 'limit', 2)">Endless</button>
        </div>
        <h4 class="option-header">Level Cap</h4>
        <p class="option-description">When on, set the maximum level to 15. When off, level will continously rise with the lock delay shortening after 20G.</p>
        <div class="btn-group" style="margin-left: 5.5em">
          <button id="marathon-cap-0" onclick="changeSetting('marathon', 'cap', 0)">Off</button>
          <button id="marathon-cap-1" onclick="changeSetting('marathon', 'cap', 1)">On</button>
        </div>
        <h4 class="option-header">Entry Delay</h4>
        <p class="option-description">Determines how long the game pauses between pieces</p>
        <div class="btn-group" style="margin-left: 3em">
          <button id="marathon-delay-0" onclick="changeSetting('marathon', 'delay', 0)">None</button>
          <button id="marathon-delay-1" onclick="changeSetting('marathon', 'delay', 1)">Short</button>
          <button id="marathon-delay-2" onclick="changeSetting('marathon', 'delay', 2)">Long</button>
        </div>
        <h4 class="option-header">0G Mode</h4>
        <p class="option-description">Disable gravity for a more relaxed game</p>
        <div class="btn-group" style="margin-left: 5.5em">
          <button id="marathon-nograv-0" onclick="changeSetting('marathon', 'nograv', 0)">Off</button>
          <button id="marathon-nograv-1" onclick="changeSetting('marathon', 'nograv', 1)">On</button>
        </div>
        <h4 class="option-header">Invisible Bonus</h4>
        <p class="option-description">Make the stack become invisible at level 21</p>
        <div class="btn-group" style="margin-left: 5.5em">
          <button id="marathon-invisible-0" onclick="changeSetting('marathon', 'invisible', 0)">Off</button>
          <button id="marathon-invisible-1" onclick="changeSetting('marathon', 'invisible', 1)">On</button>
        </div>
        <br>
        <a class="btn btn-inline" onclick="init(1)" style="width: 50%;">Start</a><a class="btn btn-inline" onclick="menu(void 0,-1)" style="width: calc(25% - .7rem); margin-left: .7rem">Back</a>
      </nav>
      <nav class="menu">
        <h1 style="font-weight: 4;font-size: 1.5rem;margin: 0px">Master</h1>
        <p style="margin: 0px">Super-fast game. Aim for 300 lines.</p>
        <h4 class="option-header">Lockdown Mode</h4>
        <p class="option-description">Determines how the lockdown will function.
          <br>
          <br>Forgiving: Lock delay will reset upon all manipulations
          <br>
          <br>Limited: Lock delay will reset for a limited amount of manipulations
          <br>
          <br>Strict: Lock delay will reset only when a piece has fallen
        </p>
        <div class="btn-group" style="margin-left: 1.9em">
          <button id="master-lock-0" onclick="changeSetting('master', 'lock', 0)">Forgiving</button>
          <button id="master-lock-1" onclick="changeSetting('master', 'lock', 1)">Limited</button>
          <button id="master-lock-2" onclick="changeSetting('master', 'lock', 2)">Strict</button>
        </div>
        <br>
        <a class="btn btn-inline" onclick="init(6)" style="width: 50%;">Start</a><a class="btn btn-inline" onclick="menu(void 0,-1)" style="width: calc(25% - .7rem); margin-left: .7rem">Back</a>
      </nav>
      <nav class="menu">
        <h1 style="font-weight: 4;font-size: 1.5rem;margin: 0px">Settings</h1>
        <a class="btn" onclick="menu(13)">Tuning</a>
        <a class="btn" onclick="menu(15)">Graphics</a>
        <a class="btn" onclick="menu(14)">Audio</a>
        <!--
        <a class="btn" onclick="menu(0)">Back</a>
        <a class="btn" onclick="menu(0)">Back</a>
-->
        <a class="btn" onclick="menu(0)">Back</a>
      </nav>
      <nav class="menu">
        <h1 style="font-weight: 4;font-size: 1.5rem;margin: 0px">Tuning</h1>
        <h4 class="option-header">Autoshift Delay</h4>
        <p class="option-description">How long it takes before the autoshift kicks in; default 10 frames</p>
        <div class="slidecontainer">
          <input type="range" min="0" max="30" value="10" class="slider" id="dasRange">
          <p id="dasValue" class="slidervalue"></p>
        </div>
        <h4 class="option-header">Autoshift Rate</h4>
        <p class="option-description">How fast the autoshift goes; default 2 frames</p>
        <div class="slidecontainer">
          <input type="range" min="0" max="10" value="2" class="slider" id="arrRange">
          <p id="arrValue" class="slidervalue"></p>
        </div>
        <h4 class="option-header">Gravity</h4>
        <p class="option-description">Override the speed at which pieces fall; default 'Auto'
        </p>
        <div class="slidecontainer">
          <input type="range" min="0" max="9" value="0" class="slider" id="gravRange">
          <p id="gravValue" class="slidervalue"></p>
        </div>
        <h4 class="option-header">Soft Drop Speed</h4>
        <p class="option-description">Speed at which the piece soft drops; default 1G
        </p>
        <div class="slidecontainer">
          <input type="range" min="0" max="7" value="6" class="slider" id="sdRange">
          <p id="sdValue" class="slidervalue"></p>
        </div>
        <h4 class="option-header">Lock Delay</h4>
        <p class="option-description">The amount of time a piece can stay landed before it locks to the stack; default 30 frames
        </p>
        <div class="slidecontainer">
          <input type="range" min="0" max="100" value="30" class="slider" id="ldRange">
          <p id="ldValue" class="slidervalue"></p>
        </div>
        <h4 class="option-header">Initial Rotation</h4>
        <p class="option-description">Allow the rotation of a piece before it appears
        </p>
        <div class="btn-group" style="margin-left: 1.9em">
          <button id="IRSMode-0" onclick="saveSpecificSetting('IRSMode', 0)">Off</button>
          <button id="IRSMode-1" onclick="saveSpecificSetting('IRSMode', 1)">Tap</button>
          <button id="IRSMode-2" onclick="saveSpecificSetting('IRSMode', 2)">Hold</button>
          <button id="IRSMode-3" onclick="saveSpecificSetting('IRSMode', 3)">Additive</button>
        </div>
        <h4 class="option-header">Initial Hold</h4>
        <p class="option-description">Allow the holding of a piece before it appears
        </p>
        <div class="btn-group" style="margin-left: 4em">
          <button id="IHSMode-0" onclick="saveSpecificSetting('IHSMode', 0)">Off</button>
          <button id="IHSMode-1" onclick="saveSpecificSetting('IHSMode', 1)">Tap</button>
          <button id="IHSMode-2" onclick="saveSpecificSetting('IHSMode', 2)">Hold</button>
        </div>
        <h4 class="option-header">Rotation System</h4>
        <p class="option-description">The desired rotation system; default 'Super'
        </p>
        <div class="btn-group-list" style="">
          <button id="RotSys-0" onclick="saveSpecificSetting('RotSys', 0)">Super</button>
          <button id="RotSys-1" onclick="saveSpecificSetting('RotSys', 1)">C2</button>
          <button id="RotSys-2" onclick="saveSpecificSetting('RotSys', 2)">Arika</button>
          <button id="RotSys-3" onclick="saveSpecificSetting('RotSys', 3)">DTET</button>
          <button id="RotSys-4" onclick="saveSpecificSetting('RotSys', 4)">QQ</button>
          <button id="RotSys-5" onclick="saveSpecificSetting('RotSys', 5)">Atari</button>
          <button id="RotSys-6" onclick="saveSpecificSetting('RotSys', 6)">Tengen</button>
          <button id="RotSys-7" onclick="saveSpecificSetting('RotSys', 7)">N-Blox</button>
          <button id="RotSys-8" onclick="saveSpecificSetting('RotSys', 8)">Nintendo</button>
          <button id="RotSys-9" onclick="saveSpecificSetting('RotSys', 9)">MS</button>
          <button id="RotSys-10" onclick="saveSpecificSetting('RotSys', 10)">E-60</button>
          <button id="RotSys-11" onclick="saveSpecificSetting('RotSys', 11)">IBM PC</button>
          <button id="RotSys-12" onclick="saveSpecificSetting('RotSys', 12)">JJ</button>
          <button id="RotSys-13" onclick="saveSpecificSetting('RotSys', 13)">5000</button>
          <button id="RotSys-14" onclick="saveSpecificSetting('RotSys', 14)">Plus</button>
          <button id="RotSys-15" onclick="saveSpecificSetting('RotSys', 15)">DX</button>
        </div>
        <br>
        <a class="btn" onclick="menu(12)">Back</a>
      </nav>
      <nav class="menu">
        <h1 style="font-weight: 4;font-size: 1.5rem;margin: 0px">Audio</h1>
        <h4 class="option-header">Enable Sound</h4>
        <p class="option-description">Completely enable or disable the sound system
        </p>
        <div class="btn-group" style="margin-left: 5.5em">
          <button id="Sound-0" onclick="saveSpecificSetting('Sound', 0)">Off</button>
          <button id="Sound-1" onclick="saveSpecificSetting('Sound', 1)">On</button>
        </div>
        <h4 class="option-header">Sound Volume</h4>
        <div class="slidecontainer">
          <input type="range" min="0" max="100" value="50" class="slider" id="volRange">
          <p id="volValue" class="slidervalue"></p>
        </div>
        <h4 class="option-header">Music Volume</h4>
        <div class="slidecontainer">
          <input type="range" min="0" max="100" value="50" class="slider" id="musRange">
          <p id="musValue" class="slidervalue"></p>
        </div>
        <h4 class="option-header">Soundbank</h4>
        <p class="option-description">Modifies the audio bank of the game
        </p>
        <div class="btn-group-list" style="">
          <button id="Soundbank-12" onclick="saveSpecificSetting('Soundbank', 12)">Tetr.js</button>
          <button id="Soundbank-0" onclick="saveSpecificSetting('Soundbank', 0)">PPT</button>
          <button id="Soundbank-1" onclick="saveSpecificSetting('Soundbank', 1)">TGM3</button>
          <button id="Soundbank-2" onclick="saveSpecificSetting('Soundbank', 2)">NullPM</button>
          <button id="Soundbank-3" onclick="saveSpecificSetting('Soundbank', 3)">Yotipo</button>
          <button id="Soundbank-4" onclick="saveSpecificSetting('Soundbank', 4)">TOJ</button>
          <button id="Soundbank-5" onclick="saveSpecificSetting('Soundbank', 5)">Retro</button>
          <button id="Soundbank-6" onclick="saveSpecificSetting('Soundbank', 6)">Friends</button>
          <button id="Soundbank-7" onclick="saveSpecificSetting('Soundbank', 7)">T99</button>
          <button id="Soundbank-8" onclick="saveSpecificSetting('Soundbank', 8)">.com</button>
          <button id="Soundbank-9" onclick="saveSpecificSetting('Soundbank', 9)">Party</button>
          <button id="Soundbank-10" onclick="saveSpecificSetting('Soundbank', 10)">Ultimate</button>
          <button id="Soundbank-11" onclick="saveSpecificSetting('Soundbank', 11)">Ace</button>
        </div>
        <h4 class="option-header">Next Queue Audio Indicator</h4>
        <p class="option-description">Plays a sound for a specific piece when it arrives in the next queue
        </p>
        <div class="btn-group" style="margin-left: 5.5em">
          <button id="NextSound-0" onclick="saveSpecificSetting('NextSound', 0)">Off</button>
          <button id="NextSound-1" onclick="saveSpecificSetting('NextSound', 1)">On</button>
        </div>
        <h4 class="option-header">Next Queue Soundbank</h4>
        <p class="option-description">Modifies the audio bank of the next queue audio indicators
        </p>
        <div class="btn-group-list" style="">
          <button id="NextType-3" onclick="saveSpecificSetting('NextType', 3)">Tetr.js</button>
          <button id="NextType-0" onclick="saveSpecificSetting('NextType', 0)">TGM3</button>
          <button id="NextType-2" onclick="saveSpecificSetting('NextType', 2)">TGM1</button>
          <button id="NextType-1" onclick="saveSpecificSetting('NextType', 1)">NullPM</button>
        </div>
        <h4 class="option-header">Voice</h4>
        <p class="option-description">Enable the announcer
        </p>
        <div class="btn-group" style="margin-left: 5.5em">
          <button id="Voice-0" onclick="saveSpecificSetting('Voice', 0)">Off</button>
          <button id="Voice-1" onclick="saveSpecificSetting('Voice', 1)">On</button>
        </div>
        <h4 class="option-header">Voicebank</h4>
        <p class="option-description">Modifies the soundbank of the announcer
        </p>
        <div class="btn-group-list" style="">
          <button id="Voicebank-2" onclick="saveSpecificSetting('Voicebank', 2)">TOJ</button>
          <button id="Voicebank-1" onclick="saveSpecificSetting('Voicebank', 1)">Friends</button>
          <button id="Voicebank-0" onclick="saveSpecificSetting('Voicebank', 0)">Alexey</button>
        </div>
        <br>
        <a class="btn" onclick="menu(12)">Back</a>
      </nav>
      <nav class="menu">
        <h1 style="font-weight: 4;font-size: 1.5rem;margin: 0px">Graphics</h1>
        <h4 class="option-header">Game Size</h4>
        <p class="option-description">The size the game takes in the browser window
        </p>
        <div class="btn-group-list" style="">
          <button id="Size-1" onclick="saveSpecificSetting('Size', 1)">Small</button>
          <button id="Size-2" onclick="saveSpecificSetting('Size', 2)">Medium</button>
          <button id="Size-3" onclick="saveSpecificSetting('Size', 3)">Large</button>
          <button id="Size-4" onclick="saveSpecificSetting('Size', 4)">Extra Large</button>
          <button id="Size-0" onclick="saveSpecificSetting('Size', 0)">Fullscreen</button>
        </div>
        <h4 class="option-header">Next Queue Count</h4>
        <p class="option-description">Changes the length in pieces of the next queue</p>
        <div class="slidecontainer">
          <input type="range" min="0" max="6" value="6" class="slider" id="nextRange">
          <p id="nextValue" class="slidervalue"></p>
        </div>
        <div style="display:none">
        <h4 class="option-header">Next Queue Side</h4>
        <p class="option-description">Changes the side the next queue takes
        </p>
        <div class="btn-group" style="margin-left: 5em">
          <button id="NextSide-1" onclick="saveSpecificSetting('NextSide', 1)">Left</button>
          <button id="NextSide-0" onclick="saveSpecificSetting('NextSide', 0)">Right</button>
        </div>
        </div>
        <h4 class="option-header">Block Skin</h4>
        <p class="option-description">The desired block skin
        </p>
        <div class="btn-group-list" style="">
          <button id="Block-13" onclick="saveSpecificSetting('Block', 13)">Tetr.js</button>
          <button id="Block-1" onclick="saveSpecificSetting('Block', 1)">Flat</button>
          <button id="Block-0" onclick="saveSpecificSetting('Block', 0)">Bevelled</button>
          <button id="Block-2" onclick="saveSpecificSetting('Block', 2)">Glossy</button>
          <button id="Block-3" onclick="saveSpecificSetting('Block', 3)">Arika</button>
          <button id="Block-4" onclick="saveSpecificSetting('Block', 4)">Aqua</button>
          <button id="Block-5" onclick="saveSpecificSetting('Block', 5)">Arcade</button>
          <button id="Block-6" onclick="saveSpecificSetting('Block', 6)">N-Blox</button>
          <button id="Block-7" onclick="saveSpecificSetting('Block', 7)">Bone</button>
          <button id="Block-8" onclick="saveSpecificSetting('Block', 8)">Retro</button>
          <button id="Block-9" onclick="saveSpecificSetting('Block', 9)">Friends</button>
          <button id="Block-10" onclick="saveSpecificSetting('Block', 10)">T99</button>
          <button id="Block-11" onclick="saveSpecificSetting('Block', 11)">.com</button>
          <button id="Block-12" onclick="saveSpecificSetting('Block', 12)">PPT</button>
        </div>
        <canvas id="sprite"></canvas>
        <h4 class="option-header">Monochrome</h4>
        <p class="option-description">Use only white for block skins
        </p>
        <div class="btn-group" style="margin-left: 5.5em">
          <button id="Monochrome-0" onclick="saveSpecificSetting('Monochrome', 0)">Off</button>
          <button id="Monochrome-1" onclick="saveSpecificSetting('Monochrome', 1)">On</button>
        </div>
        <h4 class="option-header">Outline</h4>
        <p class="option-description">Options for an outline around the pieces. 'Hidden' hides the stack.
        </p>
        <div class="btn-group" style="margin-left: 2em">
          <button id="Outline-0" onclick="saveSpecificSetting('Outline', 0)">Off</button>
          <button id="Outline-1" onclick="saveSpecificSetting('Outline', 1)">On</button>
          <button id="Outline-2" onclick="saveSpecificSetting('Outline', 2)">Hidden</button>
          <button id="Outline-3" onclick="saveSpecificSetting('Outline', 3)">Only</button>
        </div>
        <h4 class="option-header">Ghost</h4>
        <p class="option-description">Options for the ghost piece. 'Hidden' hides the active piece.
        </p>
        <div class="btn-group" style="margin-left: 1.2em">
          <button id="Ghost-2" onclick="saveSpecificSetting('Ghost', 2)">Off</button>
          <button id="Ghost-0" onclick="saveSpecificSetting('Ghost', 0)">Grey</button>
          <button id="Ghost-1" onclick="saveSpecificSetting('Ghost', 1)">Colour</button>
          <button id="Ghost-3" onclick="saveSpecificSetting('Ghost', 3)">Hidden</button>
        </div>
        <h4 class="option-header">Grid</h4>
        <p class="option-description">Displays the background grid.
        </p>
        <div class="btn-group" style="margin-left: 5.5em">
          <button id="Grid-0" onclick="saveSpecificSetting('Grid', 0)">Off</button>
          <button id="Grid-1" onclick="saveSpecificSetting('Grid', 1)">On</button>
        </div>
        <h4 class="option-header">Action Text</h4>
        <p class="option-description">Displays flying text for things like "SINGLE", "DOUBLE', etc. Also shows the combo and back-to-back streak counter.
        </p>
        <div class="btn-group" style="margin-left: 5.5em">
          <button id="Messages-0" onclick="saveSpecificSetting('Messages', 0)">Off</button>
          <button id="Messages-1" onclick="saveSpecificSetting('Messages', 1)">On</button>
        </div>
        <h4 class="option-header">Matrix Sway</h4>
        <p class="option-description">When enabled, the playfield will react to the force of the pieces and move slightly.
        </p>
        <div class="btn-group" style="margin-left: 5.5em">
          <button id="MatrixSway-0" onclick="saveSpecificSetting('MatrixSway', 0)">Off</button>
          <button id="MatrixSway-1" onclick="saveSpecificSetting('MatrixSway', 1)">On</button>
        </div>
        <h4 class="option-header">Visual Initial Systems</h4>
        <p class="option-description">When enabled, the initials systems will show during gameplay
        </p>
        <div class="btn-group" style="margin-left: 5.5em">
          <button id="InitialVis-0" onclick="saveSpecificSetting('InitialVis', 0)">Off</button>
          <button id="InitialVis-1" onclick="saveSpecificSetting('InitialVis', 1)">On</button>
        </div>
        <br>
        <a class="btn" onclick="menu(12)">Back</a>
      </nav>
      <nav class="menu">
        <h1 style="font-weight: 4;font-size: 1.5rem;margin: 0px">Survival</h1>
        <p style="margin: 0px">Clear the bottom as line as soon as possible</p>
          <h4 class="option-header">Zen Mode</h4>
          <p class="option-description">Garbage will appear by piece instead of by time
          </p>
          <div class="btn-group" style="margin-left: 5.5em">
            <button id="survival-zen-0" onclick="changeSetting('survival', 'zen', 0)">Off</button>
            <button id="survival-zen-1" onclick="changeSetting('survival', 'zen', 1)">On</button>
          </div>
          <h4 class="option-header">Starting Level</h4>
          <p class="option-description">Determines how far ahead you'll start in the challenge (not compatible with zen, currently)
          </p>
          <div class="btn-group" style="margin-left: 1.9em">
            <button id="survival-slevel-0" onclick="changeSetting('survival', 'slevel', 0)">0</button>
            <button id="survival-slevel-1" onclick="changeSetting('survival', 'slevel', 1)">500</button>
            <button id="survival-slevel-2" onclick="changeSetting('survival', 'slevel', 2)">1000</button>
            <button id="survival-slevel-3" onclick="changeSetting('survival', 'slevel', 3)">1500</button>
            <button id="survival-slevel-4" onclick="changeSetting('survival', 'slevel', 4)">2000</button>
          </div>
          <br>
        <a class="btn btn-inline" onclick="init(3)" style="width: 50%;">Start</a><a class="btn btn-inline" onclick="menu(void 0,-1)" style="width: calc(25% - .7rem); margin-left: .7rem">Back</a>
      </nav>
      <nav class="menu">
        <h1 style="font-weight: 4;font-size: 1.5rem;margin: 0px">Grades</h1>
        <p style="margin: 0px"><span style="color: red;">UNFINISHED</span><br>Play as fast as possible to earn the highest grade!</p>
          <h4 class="option-header">Game Rule</h4>
          <p class="option-description">Determines the tuning of the game
          </p>
          <div class="btn-group" style="margin-left: 4.4em">
            <button id="grades-rule-0" onclick="changeSetting('grades', 'rule', 0)">Classic</button>
            <button id="grades-rule-1" onclick="changeSetting('grades', 'rule', 1)">World</button>
          </div>
          <br>
        <a class="btn btn-inline" onclick="init(9)" style="width: 50%;">Start</a><a class="btn btn-inline" onclick="menu(void 0,-1)" style="width: calc(25% - .7rem); margin-left: .7rem">Back</a>
      </nav>
    </div>
    <div id="c">
     <div id="sounds-loading">
             <label id="sound-name" for="sound-loading-bar" style="display:block;"></label>
            <progress id="sound-loading-bar" value="0" max="100"></progress>
      </div>
      <h3 id="irs-indicator" class="flashing" style="position: absolute; top: -.7em; left: 1em; display: none;">INITIAL</h3>
      <h3 style="font-weight: 300;"><span class="white-border-span">Next</span></h3>
      <canvas id="preview"></canvas>
      <div id="lineshower" style="font-size: 2.5em; transform:translate(0, 9em); display: none;">
        <img id="linevector" src="tetr_js/linevector.svg">
        <p id="ivalue" style="margin:0px; text-align: center; font-family: 'Roboto Mono'; font-weight: 200;">0</p>
      </div>
    </div>
  </div>
  <script type="text/javascript" src="tetr_js/howler.core.js"></script>
  <script type="text/javascript" src="tetr_js/bigmin.js"></script>
  <script type="text/javascript" src="tetr_js/tetris.js"></script>
  <script type="text/javascript" src="tetr_js/piece.js"></script>
  <script type="text/javascript" src="tetr_js/stack.js"></script>
  <script type="text/javascript" src="tetr_js/hold.js"></script>
  <script type="text/javascript" src="tetr_js/preview.js"></script>
  <script type="text/javascript" src="tetr_js/menu.js"></script>
  <script type="text/javascript" src="tetr_js/bg.js"></script>
  <script type="text/javascript" src="tetr_js/ranking.js"></script>
  <script type="text/javascript" src="tetr_js/compress.js"></script>
  <script type="text/javascript" src="tetr_js/sound.js"></script>
  <script type="text/javascript" src="tetr_js/touch.js"></script>
  <script src="npm/js-cookie-2/src/js.cookie.min.js"></script>
  <script>
    var sliders = {
      names: ["dasRange", "arrRange", "gravRange", "sdRange", "volRange", "musRange", "ldRange", "nextRange"],
      outputs: ["dasValue", "arrValue", "gravValue", "sdValue", "volValue", "musValue", "ldValue", "nextValue"],
      types: ["time", "speed", "array", "array", "percentage", "percentage", "time", "count"],
      setting: ["DAS", "ARR", "Gravity", "Soft Drop", "Volume", "MusicVol", "Lock Delay", "Next"],
      aname: ["", "", gravityArray, sdArray, "", "", "", ""],
      namesE: [],
      outputsE: [],
    }
    function updateSlider(output, slider, i) {
      mySettings[sliders.setting[i]] = parseInt(slider.value)
      saveSetting();
      if (sliders.types[i] == "time") {
        output.innerHTML = slider.value + " FRAMES; " + Math.round((((1000 / 60) * slider.value) + 0.00001) * 100) / 100 + " MS";
      } else if (sliders.types[i] == "speed") {
        if (slider.value != 0) {
          output.innerHTML = slider.value + " FRAMES; " + Math.round(((60 / slider.value) + 0.00001) * 100) / 100 + " HZ";
        } else {
          output.innerHTML = "INSTANT";
        }
      } else if (sliders.types[i] == "array") {
        output.innerHTML = sliders.aname[i][slider.value];
      } else if (sliders.types[i] == "percentage") {
        output.innerHTML = slider.value + "%"
        try {
          sound.updateVolume();
        } catch (e) {
        }
      } else if (sliders.types[i] == "count") {
        if (slider.value != 0) {
          output.innerHTML = slider.value + " PIECES";
        } else {
          output.innerHTML = "DISABLED";
        }
    }
    }
    for (let i = 0; i < sliders.names.length; i++) {
      let slider = document.getElementById(sliders.names[i]);
      let output = document.getElementById(sliders.outputs[i]);
      //    updateSlider(output, slider, i);
      slider.oninput = function() {
        //      output.innerHTML = this.value;
        updateSlider(output, slider, i);
      }
    }
    displaySettings()
//    menu(15)
    function updateSprint40PB() {
      //    document.getElementById("sprint-pb").innerHTML = displayTime;
      if (Cookies.get("sprint40pbvisual") != undefined) {
        document.getElementById("sprint-pb").innerHTML = Cookies.get("sprint40pbvisual")
        document.getElementById("sprint-pb-menu").innerHTML = Cookies.get("sprint40pbvisual")
      } else {
        document.getElementById("sprint-pb").innerHTML = "?????"
        document.getElementById("sprint-pb-menu").innerHTML = "?????"
      }
    }
    function removeSprintPB() {
      Cookies.remove('sprint40pb');
      Cookies.remove('sprint40pbvisual');
      document.getElementById("sprint-pb").innerHTML = "?????"
      document.getElementById("sprint-pb-menu").innerHTML = "?????"
    }
//    updateSprint40PB();
  </script>
</body>
</html>